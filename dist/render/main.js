"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){(0,_defineProperty2["default"])(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2["default"])(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2["default"])(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return(0,_possibleConstructorReturn2["default"])(this,result)}}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var _require=require("electron"),ipcRenderer=_require.ipcRenderer;var React=require("react");var ReactDOM=require("react-dom");var linkifyHTML=require("linkifyjs/html");var Entry=require("./types/entry");var _require2=require("./constants"),MESSAGE_CLEAR_BACKEND=_require2.MESSAGE_CLEAR_BACKEND,MESSAGE_CONFIRM_REMOVE=_require2.MESSAGE_CONFIRM_REMOVE,CLIPBOARD_CLEAR=_require2.CLIPBOARD_CLEAR,CLIPBOARD_EVENT=_require2.CLIPBOARD_EVENT,CLIPBOARD_BULK_COPY=_require2.CLIPBOARD_BULK_COPY;function linkify(text,click){return linkifyHTML(text,{events:{click:click},defaultProtocol:"https",target:{url:"_blank"}})}/**
 *
 * @param {Object} param0
 * @param {Entry} param0.entry
 * @param {Function} param0.pin
 * @param {Function} param0.copy
 * @param {Function} param0.remove
 * @param {Function} param0.select
 */var ListEntry=function ListEntry(_ref){var entry=_ref.entry,pin=_ref.pin,copy=_ref.copy,remove=_ref.remove,select=_ref.select;return/*#__PURE__*/React.createElement("li",{"data-_id":entry._id,"data-selected":entry.selected,"data-pinned":entry.pinned,style:{position:"relative",listStyle:"none"},title:"Click to copy",onClickCapture:copy,onKeyDown:function onKeyDown(e){return e.code==="Enter"&&copy(e)},tabIndex:0,role:"menuitem"},entry.type==="image"?/*#__PURE__*/React.createElement("img",{src:entry.value,alt:"Copied from clipboard"}):linkify(entry.value,copy),/*#__PURE__*/React.createElement("div",{className:"entry-actions",role:"menubar"},/*#__PURE__*/React.createElement("button",{onClickCapture:remove,"aria-label":"Delete this entry",title:"Delete this entry"},/*#__PURE__*/React.createElement("img",{src:"./trash-outline.svg",alt:"delete icon"})),/*#__PURE__*/React.createElement("button",{onClickCapture:pin,"aria-label":"Pin this entry",title:"Pin this entry","data-active":entry.pinned},/*#__PURE__*/React.createElement("img",{src:"./bookmark-outline.svg",alt:"pin icon"})),/*#__PURE__*/React.createElement("button",{onClickCapture:copy,"aria-label":"Copy this entry",title:"Copy this entry"},/*#__PURE__*/React.createElement("img",{src:"./clipboard-outline.svg",alt:"copy icon"})),/*#__PURE__*/React.createElement("button",{onClickCapture:select,"aria-label":"Select this entry",title:"Select this entry","data-active":entry.selected},/*#__PURE__*/React.createElement("img",{src:"./checkmark-square-outline.svg",alt:"select icon"}))))};var App=/*#__PURE__*/function(_React$Component){(0,_inherits2["default"])(App,_React$Component);var _super=_createSuper(App);function App(props){var _this;(0,_classCallCheck2["default"])(this,App);_this=_super.call(this,props);(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"handleKeyDown",function(_ref2){var code=_ref2.code,ctrlKey=_ref2.ctrlKey,shiftKey=_ref2.shiftKey;if(/Shift/gi.test(code)&&!_this.state.selecting)_this.setState(_objectSpread(_objectSpread({},_this.state),{},{selecting:true}));// Delete pressed
if(code==="Delete")if(ctrlKey){if(shiftKey)// Ctrl pressed
// Combination of CTRL + SHIFT + DELETE
_this.clearHistory();// Combination of CTRL + DELETE
else _this.clearClipboard();// Delete
}else if(_this.isSelecting())_this.deleteSelection();if(code==="KeyC"&&ctrlKey)if(_this.isSelecting())_this.copySelectionButtonRef.current.click()});(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"handleKeyUp",function(_ref3){var code=_ref3.code;if(/Shift/gi.test(code)&&!_this.state.history.some(function(e){return e.selected}))_this.setState(_objectSpread(_objectSpread({},_this.state),{},{selecting:false}))});(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"handleKeyUpClick",function(){if(_this.state.selecting)_this.setState(_objectSpread(_objectSpread({},_this.state),{},{history:_this.state.history.map(function(entry){return new Entry(_objectSpread(_objectSpread({},entry),{},{selected:false}))}),selecting:false}))});(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"handleClipboardEvent",function(ev,entry){var history=_this.state.history;// if you really want a performance boost out of this you could
// switch `history` to an object instead, O(1) search by id
if(!history.some(function(e){return e.compareTo(entry)}))_this.setState(_objectSpread(_objectSpread({},_this.state),{},{history:[].concat((0,_toConsumableArray2["default"])(history),[new Entry(entry)])// Convert serialized entry object into Entry again
}))});(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"clearHistory",/*#__PURE__*/(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee(){return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!confirm(MESSAGE_CLEAR_BACKEND)){_context.next=3;break}_context.next=3;return _this.clearClipboard();case 3:_this.setState(_objectSpread(_objectSpread({},_this.state),{},{history:_this.state.history.filter(function(e){return e.pinned})}));case 4:case"end":return _context.stop();}}},_callee)})));(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"clearClipboard",function(){return ipcRenderer.invoke(CLIPBOARD_CLEAR).then(function(){alert("Cleared your clipboard!")})});(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"remove",function(ev){var _id=ev.currentTarget.parentNode.parentNode.dataset._id;// The pinging on the backend will always signal to display what's currently stored on the clipboard.
// Leaving the user confused is not part of the deal.
if(confirm(MESSAGE_CONFIRM_REMOVE)){console.log("confirmed");_this.setState(_objectSpread(_objectSpread({},_this.state),{},{history:_this.state.history.filter(function(entry){return entry._id!==_id})}))}});(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"copy",function(ev){var target=ev.target,currentTarget=ev.currentTarget;// Make sure to not copy links and leave their handling to the backend
if(target.tagName.toLowerCase()!=="a"){ev.preventDefault();var _id=_this.getEntryListItem(currentTarget).dataset._id;var index=_this.state.history.findIndex(function(e){return e._id===_id});if(!_this.isSelecting())ipcRenderer.send(CLIPBOARD_EVENT,_this.state.history[index]);else{var history=Array.from(_this.state.history);if(history[index].type!=="text")alert("Fatal: Can only bulk copy text entries");else{history[index].selected=!history[index].selected;_this.setState(_objectSpread(_objectSpread({},_this.state),{},{history:history}))}}ev.stopPropagation()}});(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"getEntryListItem",function(el){var parent=el;while(parent.tagName!=="LI"){parent=parent.parentNode}return parent});(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"pin",function(ev){var _id=_this.getEntryListItem(ev.currentTarget).dataset._id;var indexOfEntry=_this.state.history.findIndex(function(e){return e._id===_id});var history=Array.from(_this.state.history);history[indexOfEntry].pinned=!history[indexOfEntry].pinned;_this.setState(_objectSpread(_objectSpread({},_this.history),{},{history:history}))});(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"copySelection",function(){var merged=_this.state.history.filter(function(e){return e.selected}).join("\r\n");ipcRenderer.send(CLIPBOARD_BULK_COPY,merged)});(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"deleteSelection",function(ev){if(ev)ev.preventDefault();var _this$state$history$f=_this.state.history.filter(function(e){return e.selected}),length=_this$state$history$f.length;_this.setState(_objectSpread(_objectSpread({},_this.state),{},{history:_this.state.history.filter(function(e){return!e.selected})}),function(){alert("Deleted ".concat(length," entries."))})});(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"isSelecting",function(){return _this.isSelectingShift()||_this.isAnyEntrySelected()});(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"isSelectingShift",function(){return _this.state.selecting});(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"isAnyEntrySelected",function(){return _this.state.history.some(function(e){return e.selected})});(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"select",function(ev){var _id=ev.currentTarget.parentNode.parentNode.dataset._id;var index=_this.state.history.findIndex(function(e){return e._id===_id});var history=Array.from(_this.state.history);history[index].selected=!history[index].selected;_this.setState(_objectSpread(_objectSpread({},_this.state),{},{selecting:true,history:history}),function(){return console.log(_this.state.history[0].selected)})});_this.state={/** @type {import('../types/entry')[]} */history:[],selectingToggle:false,selecting:false};_this.copySelectionButtonRef=React.createRef();return _this}/**
   * @param {KeyboardEvent} param0
   */(0,_createClass2["default"])(App,[{key:"componentDidMount",value:function componentDidMount(){document.addEventListener("click",this.handleKeyUpClick);document.addEventListener("keyup",this.handleKeyUp);document.addEventListener("keydown",this.handleKeyDown);ipcRenderer.on(CLIPBOARD_EVENT,this.handleClipboardEvent)}},{key:"render",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement("div",{style:{display:"flex"}},/*#__PURE__*/React.createElement("button",{onClick:this.clearHistory},"Clear log"),/*#__PURE__*/React.createElement("button",{onClick:this.clearClipboard},"Clear clipboard only"),/*#__PURE__*/React.createElement("button",{onClick:this.copySelection,disabled:!this.isAnyEntrySelected()},"Copy selection"),/*#__PURE__*/React.createElement("button",{onClick:this.deleteSelection,disabled:!this.isAnyEntrySelected()},"Delete selection")),/*#__PURE__*/React.createElement("div",{style:{margin:"8px 0"}},this.state.history.length===0&&"Free as the wind~",this.state.history.length===1&&"There is 1 entry in the clipboard.",this.state.history.length>1&&"There are ".concat(this.state.history.length," entries in the clipboard.")),/*#__PURE__*/React.createElement("ul",{"data-selecting":this.state.selecting,role:"menu"},Array.from(this.state.history).filter(function(e){return e.pinned}).reverse().map(function(entry){return/*#__PURE__*/React.createElement(ListEntry,{key:entry._id,entry:entry,pin:_this2.pin,copy:_this2.copy,remove:_this2.remove,select:_this2.select})}),Array.from(this.state.history).filter(function(e){return!e.pinned}).reverse().map(function(entry){return/*#__PURE__*/React.createElement(ListEntry,{key:entry._id,entry:entry,pin:_this2.pin,copy:_this2.copy,remove:_this2.remove,select:_this2.select})})))}}]);return App}(React.Component);var container=document.querySelector("#container");ReactDOM.render(/*#__PURE__*/React.createElement(App,null),container);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9yZW5kZXIvbWFpbi5qcyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwiaXBjUmVuZGVyZXIiLCJSZWFjdCIsIlJlYWN0RE9NIiwibGlua2lmeUhUTUwiLCJFbnRyeSIsIk1FU1NBR0VfQ0xFQVJfQkFDS0VORCIsIk1FU1NBR0VfQ09ORklSTV9SRU1PVkUiLCJDTElQQk9BUkRfQ0xFQVIiLCJDTElQQk9BUkRfRVZFTlQiLCJDTElQQk9BUkRfQlVMS19DT1BZIiwibGlua2lmeSIsInRleHQiLCJjbGljayIsImV2ZW50cyIsImRlZmF1bHRQcm90b2NvbCIsInRhcmdldCIsInVybCIsIkxpc3RFbnRyeSIsImVudHJ5IiwicGluIiwiY29weSIsInJlbW92ZSIsInNlbGVjdCIsIl9pZCIsInNlbGVjdGVkIiwicGlubmVkIiwicG9zaXRpb24iLCJsaXN0U3R5bGUiLCJlIiwiY29kZSIsInR5cGUiLCJ2YWx1ZSIsIkFwcCIsInByb3BzIiwiY3RybEtleSIsInNoaWZ0S2V5IiwidGVzdCIsInN0YXRlIiwic2VsZWN0aW5nIiwic2V0U3RhdGUiLCJjbGVhckhpc3RvcnkiLCJjbGVhckNsaXBib2FyZCIsImlzU2VsZWN0aW5nIiwiZGVsZXRlU2VsZWN0aW9uIiwiY29weVNlbGVjdGlvbkJ1dHRvblJlZiIsImN1cnJlbnQiLCJoaXN0b3J5Iiwic29tZSIsIm1hcCIsImV2IiwiY29tcGFyZVRvIiwiY29uZmlybSIsImZpbHRlciIsImludm9rZSIsInRoZW4iLCJhbGVydCIsImN1cnJlbnRUYXJnZXQiLCJwYXJlbnROb2RlIiwiZGF0YXNldCIsImNvbnNvbGUiLCJsb2ciLCJ0YWdOYW1lIiwidG9Mb3dlckNhc2UiLCJwcmV2ZW50RGVmYXVsdCIsImdldEVudHJ5TGlzdEl0ZW0iLCJpbmRleCIsImZpbmRJbmRleCIsInNlbmQiLCJBcnJheSIsImZyb20iLCJzdG9wUHJvcGFnYXRpb24iLCJlbCIsInBhcmVudCIsImluZGV4T2ZFbnRyeSIsIm1lcmdlZCIsImpvaW4iLCJsZW5ndGgiLCJpc1NlbGVjdGluZ1NoaWZ0IiwiaXNBbnlFbnRyeVNlbGVjdGVkIiwic2VsZWN0aW5nVG9nZ2xlIiwiY3JlYXRlUmVmIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiaGFuZGxlS2V5VXBDbGljayIsImhhbmRsZUtleVVwIiwiaGFuZGxlS2V5RG93biIsIm9uIiwiaGFuZGxlQ2xpcGJvYXJkRXZlbnQiLCJkaXNwbGF5IiwiY29weVNlbGVjdGlvbiIsIm1hcmdpbiIsInJldmVyc2UiLCJDb21wb25lbnQiLCJjb250YWluZXIiLCJxdWVyeVNlbGVjdG9yIiwicmVuZGVyIl0sIm1hcHBpbmdzIjoiK2hGQUF3QkEsT0FBTyxDQUFDLFVBQUQsQyxDQUF2QkMsVyxVQUFBQSxXLENBQ1IsR0FBTUMsQ0FBQUEsS0FBSyxDQUFHRixPQUFPLENBQUMsT0FBRCxDQUFyQixDQUNBLEdBQU1HLENBQUFBLFFBQVEsQ0FBR0gsT0FBTyxDQUFDLFdBQUQsQ0FBeEIsQ0FDQSxHQUFNSSxDQUFBQSxXQUFXLENBQUdKLE9BQU8sQ0FBQyxnQkFBRCxDQUEzQixDQUVBLEdBQU1LLENBQUFBLEtBQUssQ0FBR0wsT0FBTyxDQUFDLGVBQUQsQ0FBckIsQyxjQVFJQSxPQUFPLENBQUMsYUFBRCxDLENBTFRNLHFCLFdBQUFBLHFCLENBQ0FDLHNCLFdBQUFBLHNCLENBQ0FDLGUsV0FBQUEsZSxDQUNBQyxlLFdBQUFBLGUsQ0FDQUMsbUIsV0FBQUEsbUIsQ0FHRixRQUFTQyxDQUFBQSxPQUFULENBQWlCQyxJQUFqQixDQUF1QkMsS0FBdkIsQ0FBOEIsQ0FDNUIsTUFBT1QsQ0FBQUEsV0FBVyxDQUFDUSxJQUFELENBQU8sQ0FDdkJFLE1BQU0sQ0FBRSxDQUNORCxLQUFLLENBQUxBLEtBRE0sQ0FEZSxDQUl2QkUsZUFBZSxDQUFFLE9BSk0sQ0FLdkJDLE1BQU0sQ0FBRSxDQUNOQyxHQUFHLENBQUUsUUFEQyxDQUxlLENBQVAsQ0FTbkIsQ0FFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUFHLENBQUUsTUFBSSxDQUFDQyxHQUhaLENBSUUsSUFBSSxDQUFFLE1BQUksQ0FBQ0MsSUFKYixDQUtFLE1BQU0sQ0FBRSxNQUFJLENBQUNDLE1BTGYsQ0FNRSxNQUFNLENBQUUsTUFBSSxDQUFDQyxNQU5mLEVBREcsQ0FITixDQWZILENBeEJGLENBdURILEMsZ0JBMVNlckIsS0FBSyxDQUFDMkYsUyxFQTZTeEIsR0FBTUMsQ0FBQUEsU0FBUyxDQUFHWixRQUFRLENBQUNhLGFBQVQsQ0FBdUIsWUFBdkIsQ0FBbEIsQ0FDQTVGLFFBQVEsQ0FBQzZGLE1BQVQsY0FBZ0Isb0JBQUMsR0FBRCxNQUFoQixDQUF5QkYsU0FBekIiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IGlwY1JlbmRlcmVyIH0gPSByZXF1aXJlKFwiZWxlY3Ryb25cIik7XG5jb25zdCBSZWFjdCA9IHJlcXVpcmUoXCJyZWFjdFwiKTtcbmNvbnN0IFJlYWN0RE9NID0gcmVxdWlyZShcInJlYWN0LWRvbVwiKTtcbmNvbnN0IGxpbmtpZnlIVE1MID0gcmVxdWlyZShcImxpbmtpZnlqcy9odG1sXCIpO1xuXG5jb25zdCBFbnRyeSA9IHJlcXVpcmUoXCIuL3R5cGVzL2VudHJ5XCIpO1xuXG5jb25zdCB7XG4gIE1FU1NBR0VfQ0xFQVJfQkFDS0VORCxcbiAgTUVTU0FHRV9DT05GSVJNX1JFTU9WRSxcbiAgQ0xJUEJPQVJEX0NMRUFSLFxuICBDTElQQk9BUkRfRVZFTlQsXG4gIENMSVBCT0FSRF9CVUxLX0NPUFksXG59ID0gcmVxdWlyZShcIi4vY29uc3RhbnRzXCIpO1xuXG5mdW5jdGlvbiBsaW5raWZ5KHRleHQsIGNsaWNrKSB7XG4gIHJldHVybiBsaW5raWZ5SFRNTCh0ZXh0LCB7XG4gICAgZXZlbnRzOiB7XG4gICAgICBjbGljayxcbiAgICB9LFxuICAgIGRlZmF1bHRQcm90b2NvbDogXCJodHRwc1wiLFxuICAgIHRhcmdldDoge1xuICAgICAgdXJsOiBcIl9ibGFua1wiLFxuICAgIH0sXG4gIH0pO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFyYW0wXG4gKiBAcGFyYW0ge0VudHJ5fSBwYXJhbTAuZW50cnlcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHBhcmFtMC5waW5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHBhcmFtMC5jb3B5XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwYXJhbTAucmVtb3ZlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwYXJhbTAuc2VsZWN0XG4gKi9cbmNvbnN0IExpc3RFbnRyeSA9ICh7IGVudHJ5LCBwaW4sIGNvcHksIHJlbW92ZSwgc2VsZWN0IH0pID0+IHtcbiAgcmV0dXJuIChcbiAgICA8bGlcbiAgICAgIGRhdGEtX2lkPXtlbnRyeS5faWR9XG4gICAgICBkYXRhLXNlbGVjdGVkPXtlbnRyeS5zZWxlY3RlZH1cbiAgICAgIGRhdGEtcGlubmVkPXtlbnRyeS5waW5uZWR9XG4gICAgICBzdHlsZT17eyBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLCBsaXN0U3R5bGU6IFwibm9uZVwiIH19XG4gICAgICB0aXRsZT1cIkNsaWNrIHRvIGNvcHlcIlxuICAgICAgb25DbGlja0NhcHR1cmU9e2NvcHl9XG4gICAgICBvbktleURvd249eyhlKSA9PiBlLmNvZGUgPT09IFwiRW50ZXJcIiAmJiBjb3B5KGUpfVxuICAgICAgdGFiSW5kZXg9ezB9XG4gICAgICByb2xlPVwibWVudWl0ZW1cIlxuICAgID5cbiAgICAgIHtlbnRyeS50eXBlID09PSBcImltYWdlXCIgPyAoXG4gICAgICAgIDxpbWcgc3JjPXtlbnRyeS52YWx1ZX0gYWx0PVwiQ29waWVkIGZyb20gY2xpcGJvYXJkXCIgLz5cbiAgICAgICkgOiAoXG4gICAgICAgIGxpbmtpZnkoZW50cnkudmFsdWUsIGNvcHkpXG4gICAgICApfVxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImVudHJ5LWFjdGlvbnNcIiByb2xlPVwibWVudWJhclwiPlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgb25DbGlja0NhcHR1cmU9e3JlbW92ZX1cbiAgICAgICAgICBhcmlhLWxhYmVsPVwiRGVsZXRlIHRoaXMgZW50cnlcIlxuICAgICAgICAgIHRpdGxlPVwiRGVsZXRlIHRoaXMgZW50cnlcIlxuICAgICAgICA+XG4gICAgICAgICAgPGltZyBzcmM9XCIuL3RyYXNoLW91dGxpbmUuc3ZnXCIgYWx0PVwiZGVsZXRlIGljb25cIiAvPlxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIG9uQ2xpY2tDYXB0dXJlPXtwaW59XG4gICAgICAgICAgYXJpYS1sYWJlbD1cIlBpbiB0aGlzIGVudHJ5XCJcbiAgICAgICAgICB0aXRsZT1cIlBpbiB0aGlzIGVudHJ5XCJcbiAgICAgICAgICBkYXRhLWFjdGl2ZT17ZW50cnkucGlubmVkfVxuICAgICAgICA+XG4gICAgICAgICAgPGltZyBzcmM9XCIuL2Jvb2ttYXJrLW91dGxpbmUuc3ZnXCIgYWx0PVwicGluIGljb25cIiAvPlxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIG9uQ2xpY2tDYXB0dXJlPXtjb3B5fVxuICAgICAgICAgIGFyaWEtbGFiZWw9XCJDb3B5IHRoaXMgZW50cnlcIlxuICAgICAgICAgIHRpdGxlPVwiQ29weSB0aGlzIGVudHJ5XCJcbiAgICAgICAgPlxuICAgICAgICAgIDxpbWcgc3JjPVwiLi9jbGlwYm9hcmQtb3V0bGluZS5zdmdcIiBhbHQ9XCJjb3B5IGljb25cIiAvPlxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIG9uQ2xpY2tDYXB0dXJlPXtzZWxlY3R9XG4gICAgICAgICAgYXJpYS1sYWJlbD1cIlNlbGVjdCB0aGlzIGVudHJ5XCJcbiAgICAgICAgICB0aXRsZT1cIlNlbGVjdCB0aGlzIGVudHJ5XCJcbiAgICAgICAgICBkYXRhLWFjdGl2ZT17ZW50cnkuc2VsZWN0ZWR9XG4gICAgICAgID5cbiAgICAgICAgICA8aW1nIHNyYz1cIi4vY2hlY2ttYXJrLXNxdWFyZS1vdXRsaW5lLnN2Z1wiIGFsdD1cInNlbGVjdCBpY29uXCIgLz5cbiAgICAgICAgPC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICA8L2xpPlxuICApO1xufTtcblxuY2xhc3MgQXBwIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KCcuLi90eXBlcy9lbnRyeScpW119ICovXG4gICAgICBoaXN0b3J5OiBbXSxcbiAgICAgIHNlbGVjdGluZ1RvZ2dsZTogZmFsc2UsXG4gICAgICBzZWxlY3Rpbmc6IGZhbHNlLFxuICAgIH07XG5cbiAgICB0aGlzLmNvcHlTZWxlY3Rpb25CdXR0b25SZWYgPSBSZWFjdC5jcmVhdGVSZWYoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0tleWJvYXJkRXZlbnR9IHBhcmFtMFxuICAgKi9cbiAgaGFuZGxlS2V5RG93biA9ICh7IGNvZGUsIGN0cmxLZXksIHNoaWZ0S2V5IH0pID0+IHtcbiAgICBpZiAoL1NoaWZ0L2dpLnRlc3QoY29kZSkgJiYgIXRoaXMuc3RhdGUuc2VsZWN0aW5nKVxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIC4uLnRoaXMuc3RhdGUsXG4gICAgICAgIHNlbGVjdGluZzogdHJ1ZSxcbiAgICAgIH0pO1xuXG4gICAgLy8gRGVsZXRlIHByZXNzZWRcbiAgICBpZiAoY29kZSA9PT0gXCJEZWxldGVcIilcbiAgICAgIGlmIChjdHJsS2V5KVxuICAgICAgICBpZiAoc2hpZnRLZXkpXG4gICAgICAgICAgLy8gQ3RybCBwcmVzc2VkXG4gICAgICAgICAgLy8gQ29tYmluYXRpb24gb2YgQ1RSTCArIFNISUZUICsgREVMRVRFXG4gICAgICAgICAgdGhpcy5jbGVhckhpc3RvcnkoKTtcbiAgICAgICAgLy8gQ29tYmluYXRpb24gb2YgQ1RSTCArIERFTEVURVxuICAgICAgICBlbHNlIHRoaXMuY2xlYXJDbGlwYm9hcmQoKTtcbiAgICAgIC8vIERlbGV0ZVxuICAgICAgZWxzZSBpZiAodGhpcy5pc1NlbGVjdGluZygpKSB0aGlzLmRlbGV0ZVNlbGVjdGlvbigpO1xuXG4gICAgaWYgKGNvZGUgPT09IFwiS2V5Q1wiICYmIGN0cmxLZXkpXG4gICAgICBpZiAodGhpcy5pc1NlbGVjdGluZygpKSB0aGlzLmNvcHlTZWxlY3Rpb25CdXR0b25SZWYuY3VycmVudC5jbGljaygpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0tleWJvYXJkRXZlbnR9IHBhcmFtMFxuICAgKi9cbiAgaGFuZGxlS2V5VXAgPSAoeyBjb2RlIH0pID0+IHtcbiAgICBpZiAoL1NoaWZ0L2dpLnRlc3QoY29kZSkgJiYgIXRoaXMuc3RhdGUuaGlzdG9yeS5zb21lKChlKSA9PiBlLnNlbGVjdGVkKSlcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAuLi50aGlzLnN0YXRlLFxuICAgICAgICBzZWxlY3Rpbmc6IGZhbHNlLFxuICAgICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgY2xpY2tzIG91dHNpZGUgZW50cmllcyBsaXN0IHdoZW4gc2VsZWN0aW5nXG4gICAqL1xuICBoYW5kbGVLZXlVcENsaWNrID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLnN0YXRlLnNlbGVjdGluZylcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAuLi50aGlzLnN0YXRlLFxuICAgICAgICBoaXN0b3J5OiB0aGlzLnN0YXRlLmhpc3RvcnkubWFwKFxuICAgICAgICAgIChlbnRyeSkgPT5cbiAgICAgICAgICAgIG5ldyBFbnRyeSh7XG4gICAgICAgICAgICAgIC4uLmVudHJ5LFxuICAgICAgICAgICAgICBzZWxlY3RlZDogZmFsc2UsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgKSxcbiAgICAgICAgc2VsZWN0aW5nOiBmYWxzZSxcbiAgICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBIYW5kbGVzIGtleWJvYXJkIHBvbGxpbmdcbiAgICogQHBhcmFtIHtFbGVjdHJvbi5JcGNNZXNzYWdlRXZlbnR9IGV2XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBlbnRyeVxuICAgKi9cbiAgaGFuZGxlQ2xpcGJvYXJkRXZlbnQgPSAoZXYsIGVudHJ5KSA9PiB7XG4gICAgY29uc3QgeyBoaXN0b3J5IH0gPSB0aGlzLnN0YXRlO1xuXG4gICAgLy8gaWYgeW91IHJlYWxseSB3YW50IGEgcGVyZm9ybWFuY2UgYm9vc3Qgb3V0IG9mIHRoaXMgeW91IGNvdWxkXG4gICAgLy8gc3dpdGNoIGBoaXN0b3J5YCB0byBhbiBvYmplY3QgaW5zdGVhZCwgTygxKSBzZWFyY2ggYnkgaWRcbiAgICBpZiAoIWhpc3Rvcnkuc29tZSgoZSkgPT4gZS5jb21wYXJlVG8oZW50cnkpKSlcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAuLi50aGlzLnN0YXRlLFxuICAgICAgICBoaXN0b3J5OiBbLi4uaGlzdG9yeSwgbmV3IEVudHJ5KGVudHJ5KV0sIC8vIENvbnZlcnQgc2VyaWFsaXplZCBlbnRyeSBvYmplY3QgaW50byBFbnRyeSBhZ2FpblxuICAgICAgfSk7XG4gIH07XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuaGFuZGxlS2V5VXBDbGljayk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuaGFuZGxlS2V5VXApO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuaGFuZGxlS2V5RG93bik7XG5cbiAgICBpcGNSZW5kZXJlci5vbihDTElQQk9BUkRfRVZFTlQsIHRoaXMuaGFuZGxlQ2xpcGJvYXJkRXZlbnQpO1xuICB9XG5cbiAgY2xlYXJIaXN0b3J5ID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmIChjb25maXJtKE1FU1NBR0VfQ0xFQVJfQkFDS0VORCkpIGF3YWl0IHRoaXMuY2xlYXJDbGlwYm9hcmQoKTtcblxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgLi4udGhpcy5zdGF0ZSxcbiAgICAgIGhpc3Rvcnk6IHRoaXMuc3RhdGUuaGlzdG9yeS5maWx0ZXIoKGUpID0+IGUucGlubmVkKSxcbiAgICB9KTtcbiAgfTtcblxuICBjbGVhckNsaXBib2FyZCA9ICgpID0+IHtcbiAgICByZXR1cm4gaXBjUmVuZGVyZXIuaW52b2tlKENMSVBCT0FSRF9DTEVBUikudGhlbigoKSA9PiB7XG4gICAgICBhbGVydChcIkNsZWFyZWQgeW91ciBjbGlwYm9hcmQhXCIpO1xuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1VJRXZlbnR9IGV2XG4gICAqL1xuICByZW1vdmUgPSAoZXYpID0+IHtcbiAgICBjb25zdCB7IF9pZCB9ID0gZXYuY3VycmVudFRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuZGF0YXNldDtcblxuICAgIC8vIFRoZSBwaW5naW5nIG9uIHRoZSBiYWNrZW5kIHdpbGwgYWx3YXlzIHNpZ25hbCB0byBkaXNwbGF5IHdoYXQncyBjdXJyZW50bHkgc3RvcmVkIG9uIHRoZSBjbGlwYm9hcmQuXG4gICAgLy8gTGVhdmluZyB0aGUgdXNlciBjb25mdXNlZCBpcyBub3QgcGFydCBvZiB0aGUgZGVhbC5cbiAgICBpZiAoY29uZmlybShNRVNTQUdFX0NPTkZJUk1fUkVNT1ZFKSkge1xuICAgICAgY29uc29sZS5sb2coXCJjb25maXJtZWRcIik7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgLi4udGhpcy5zdGF0ZSxcbiAgICAgICAgaGlzdG9yeTogdGhpcy5zdGF0ZS5oaXN0b3J5LmZpbHRlcigoZW50cnkpID0+IGVudHJ5Ll9pZCAhPT0gX2lkKSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtVSUV2ZW50fSBldlxuICAgKi9cbiAgY29weSA9IChldikgPT4ge1xuICAgIGNvbnN0IHsgdGFyZ2V0LCBjdXJyZW50VGFyZ2V0IH0gPSBldjtcblxuICAgIC8vIE1ha2Ugc3VyZSB0byBub3QgY29weSBsaW5rcyBhbmQgbGVhdmUgdGhlaXIgaGFuZGxpbmcgdG8gdGhlIGJhY2tlbmRcbiAgICBpZiAodGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSAhPT0gXCJhXCIpIHtcbiAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBjb25zdCB7IF9pZCB9ID0gdGhpcy5nZXRFbnRyeUxpc3RJdGVtKGN1cnJlbnRUYXJnZXQpLmRhdGFzZXQ7XG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMuc3RhdGUuaGlzdG9yeS5maW5kSW5kZXgoKGUpID0+IGUuX2lkID09PSBfaWQpO1xuXG4gICAgICBpZiAoIXRoaXMuaXNTZWxlY3RpbmcoKSlcbiAgICAgICAgaXBjUmVuZGVyZXIuc2VuZChDTElQQk9BUkRfRVZFTlQsIHRoaXMuc3RhdGUuaGlzdG9yeVtpbmRleF0pO1xuICAgICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IGhpc3RvcnkgPSBBcnJheS5mcm9tKHRoaXMuc3RhdGUuaGlzdG9yeSk7XG5cbiAgICAgICAgaWYgKGhpc3RvcnlbaW5kZXhdLnR5cGUgIT09IFwidGV4dFwiKVxuICAgICAgICAgIGFsZXJ0KFwiRmF0YWw6IENhbiBvbmx5IGJ1bGsgY29weSB0ZXh0IGVudHJpZXNcIik7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGhpc3RvcnlbaW5kZXhdLnNlbGVjdGVkID0gIWhpc3RvcnlbaW5kZXhdLnNlbGVjdGVkO1xuXG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAuLi50aGlzLnN0YXRlLFxuICAgICAgICAgICAgaGlzdG9yeSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICovXG4gIGdldEVudHJ5TGlzdEl0ZW0gPSAoZWwpID0+IHtcbiAgICBsZXQgcGFyZW50ID0gZWw7XG5cbiAgICB3aGlsZSAocGFyZW50LnRhZ05hbWUgIT09IFwiTElcIikgcGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGU7XG5cbiAgICByZXR1cm4gcGFyZW50O1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1VJRXZlbnR9IGV2XG4gICAqL1xuICBwaW4gPSAoZXYpID0+IHtcbiAgICBjb25zdCB7IF9pZCB9ID0gdGhpcy5nZXRFbnRyeUxpc3RJdGVtKGV2LmN1cnJlbnRUYXJnZXQpLmRhdGFzZXQ7XG4gICAgY29uc3QgaW5kZXhPZkVudHJ5ID0gdGhpcy5zdGF0ZS5oaXN0b3J5LmZpbmRJbmRleCgoZSkgPT4gZS5faWQgPT09IF9pZCk7XG5cbiAgICBjb25zdCBoaXN0b3J5ID0gQXJyYXkuZnJvbSh0aGlzLnN0YXRlLmhpc3RvcnkpO1xuICAgIGhpc3RvcnlbaW5kZXhPZkVudHJ5XS5waW5uZWQgPSAhaGlzdG9yeVtpbmRleE9mRW50cnldLnBpbm5lZDtcblxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgLi4udGhpcy5oaXN0b3J5LFxuICAgICAgaGlzdG9yeSxcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtVSUV2ZW50fSBldlxuICAgKi9cbiAgY29weVNlbGVjdGlvbiA9ICgpID0+IHtcbiAgICBjb25zdCBtZXJnZWQgPSB0aGlzLnN0YXRlLmhpc3RvcnkuZmlsdGVyKChlKSA9PiBlLnNlbGVjdGVkKS5qb2luKFwiXFxyXFxuXCIpO1xuXG4gICAgaXBjUmVuZGVyZXIuc2VuZChDTElQQk9BUkRfQlVMS19DT1BZLCBtZXJnZWQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1VJRXZlbnR9IGV2XG4gICAqL1xuICBkZWxldGVTZWxlY3Rpb24gPSAoZXYpID0+IHtcbiAgICBpZiAoZXYpIGV2LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBjb25zdCB7IGxlbmd0aCB9ID0gdGhpcy5zdGF0ZS5oaXN0b3J5LmZpbHRlcigoZSkgPT4gZS5zZWxlY3RlZCk7XG4gICAgdGhpcy5zZXRTdGF0ZShcbiAgICAgIHtcbiAgICAgICAgLi4udGhpcy5zdGF0ZSxcbiAgICAgICAgaGlzdG9yeTogdGhpcy5zdGF0ZS5oaXN0b3J5LmZpbHRlcigoZSkgPT4gIWUuc2VsZWN0ZWQpLFxuICAgICAgfSxcbiAgICAgICgpID0+IHtcbiAgICAgICAgYWxlcnQoYERlbGV0ZWQgJHtsZW5ndGh9IGVudHJpZXMuYCk7XG4gICAgICB9LFxuICAgICk7XG4gIH07XG5cbiAgaXNTZWxlY3RpbmcgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuaXNTZWxlY3RpbmdTaGlmdCgpIHx8IHRoaXMuaXNBbnlFbnRyeVNlbGVjdGVkKCk7XG4gIH07XG5cbiAgaXNTZWxlY3RpbmdTaGlmdCA9ICgpID0+IHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5zZWxlY3Rpbmc7XG4gIH07XG5cbiAgaXNBbnlFbnRyeVNlbGVjdGVkID0gKCkgPT4ge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLmhpc3Rvcnkuc29tZSgoZSkgPT4gZS5zZWxlY3RlZCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7VUlFdmVudH0gZXZcbiAgICovXG4gIHNlbGVjdCA9IChldikgPT4ge1xuICAgIGNvbnN0IHsgX2lkIH0gPSBldi5jdXJyZW50VGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5kYXRhc2V0O1xuXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLnN0YXRlLmhpc3RvcnkuZmluZEluZGV4KChlKSA9PiBlLl9pZCA9PT0gX2lkKTtcblxuICAgIGNvbnN0IGhpc3RvcnkgPSBBcnJheS5mcm9tKHRoaXMuc3RhdGUuaGlzdG9yeSk7XG4gICAgaGlzdG9yeVtpbmRleF0uc2VsZWN0ZWQgPSAhaGlzdG9yeVtpbmRleF0uc2VsZWN0ZWQ7XG5cbiAgICB0aGlzLnNldFN0YXRlKHsgLi4udGhpcy5zdGF0ZSwgc2VsZWN0aW5nOiB0cnVlLCBoaXN0b3J5IH0sICgpID0+XG4gICAgICBjb25zb2xlLmxvZyh0aGlzLnN0YXRlLmhpc3RvcnlbMF0uc2VsZWN0ZWQpLFxuICAgICk7XG4gIH07XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8PlxuICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6IFwiZmxleFwiIH19PlxuICAgICAgICAgIDxidXR0b24gb25DbGljaz17dGhpcy5jbGVhckhpc3Rvcnl9PkNsZWFyIGxvZzwvYnV0dG9uPlxuICAgICAgICAgIDxidXR0b24gb25DbGljaz17dGhpcy5jbGVhckNsaXBib2FyZH0+Q2xlYXIgY2xpcGJvYXJkIG9ubHk8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmNvcHlTZWxlY3Rpb259XG4gICAgICAgICAgICBkaXNhYmxlZD17IXRoaXMuaXNBbnlFbnRyeVNlbGVjdGVkKCl9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgQ29weSBzZWxlY3Rpb25cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmRlbGV0ZVNlbGVjdGlvbn1cbiAgICAgICAgICAgIGRpc2FibGVkPXshdGhpcy5pc0FueUVudHJ5U2VsZWN0ZWQoKX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICBEZWxldGUgc2VsZWN0aW9uXG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpbjogXCI4cHggMFwiIH19PlxuICAgICAgICAgIHt0aGlzLnN0YXRlLmhpc3RvcnkubGVuZ3RoID09PSAwICYmIFwiRnJlZSBhcyB0aGUgd2luZH5cIn1cbiAgICAgICAgICB7dGhpcy5zdGF0ZS5oaXN0b3J5Lmxlbmd0aCA9PT0gMSAmJlxuICAgICAgICAgICAgXCJUaGVyZSBpcyAxIGVudHJ5IGluIHRoZSBjbGlwYm9hcmQuXCJ9XG4gICAgICAgICAge3RoaXMuc3RhdGUuaGlzdG9yeS5sZW5ndGggPiAxICYmXG4gICAgICAgICAgICBgVGhlcmUgYXJlICR7dGhpcy5zdGF0ZS5oaXN0b3J5Lmxlbmd0aH0gZW50cmllcyBpbiB0aGUgY2xpcGJvYXJkLmB9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8dWwgZGF0YS1zZWxlY3Rpbmc9e3RoaXMuc3RhdGUuc2VsZWN0aW5nfSByb2xlPVwibWVudVwiPlxuICAgICAgICAgIHtBcnJheS5mcm9tKHRoaXMuc3RhdGUuaGlzdG9yeSlcbiAgICAgICAgICAgIC5maWx0ZXIoKGUpID0+IGUucGlubmVkKVxuICAgICAgICAgICAgLnJldmVyc2UoKVxuICAgICAgICAgICAgLm1hcCgoZW50cnkpID0+IChcbiAgICAgICAgICAgICAgPExpc3RFbnRyeVxuICAgICAgICAgICAgICAgIGtleT17ZW50cnkuX2lkfVxuICAgICAgICAgICAgICAgIGVudHJ5PXtlbnRyeX1cbiAgICAgICAgICAgICAgICBwaW49e3RoaXMucGlufVxuICAgICAgICAgICAgICAgIGNvcHk9e3RoaXMuY29weX1cbiAgICAgICAgICAgICAgICByZW1vdmU9e3RoaXMucmVtb3ZlfVxuICAgICAgICAgICAgICAgIHNlbGVjdD17dGhpcy5zZWxlY3R9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApKX1cblxuICAgICAgICAgIHtBcnJheS5mcm9tKHRoaXMuc3RhdGUuaGlzdG9yeSlcbiAgICAgICAgICAgIC5maWx0ZXIoKGUpID0+ICFlLnBpbm5lZClcbiAgICAgICAgICAgIC5yZXZlcnNlKClcbiAgICAgICAgICAgIC5tYXAoKGVudHJ5KSA9PiAoXG4gICAgICAgICAgICAgIDxMaXN0RW50cnlcbiAgICAgICAgICAgICAgICBrZXk9e2VudHJ5Ll9pZH1cbiAgICAgICAgICAgICAgICBlbnRyeT17ZW50cnl9XG4gICAgICAgICAgICAgICAgcGluPXt0aGlzLnBpbn1cbiAgICAgICAgICAgICAgICBjb3B5PXt0aGlzLmNvcHl9XG4gICAgICAgICAgICAgICAgcmVtb3ZlPXt0aGlzLnJlbW92ZX1cbiAgICAgICAgICAgICAgICBzZWxlY3Q9e3RoaXMuc2VsZWN0fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKSl9XG4gICAgICAgIDwvdWw+XG4gICAgICA8Lz5cbiAgICApO1xuICB9XG59XG5cbmNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY29udGFpbmVyXCIpO1xuUmVhY3RET00ucmVuZGVyKDxBcHAgLz4sIGNvbnRhaW5lcik7XG4iXX0=