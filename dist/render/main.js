"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){(0,_defineProperty2["default"])(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2["default"])(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2["default"])(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return(0,_possibleConstructorReturn2["default"])(this,result)}}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var _require=require("electron"),ipcRenderer=_require.ipcRenderer;var React=require("react");var ReactDOM=require("react-dom");var linkifyHTML=require("linkifyjs/html");var Entry=require("./types/entry");var _require2=require("./constants"),MESSAGE_CLEAR_BACKEND=_require2.MESSAGE_CLEAR_BACKEND,MESSAGE_CONFIRM_REMOVE=_require2.MESSAGE_CONFIRM_REMOVE,CLIPBOARD_CLEAR=_require2.CLIPBOARD_CLEAR,CLIPBOARD_EVENT=_require2.CLIPBOARD_EVENT,CLIPBOARD_BULK_COPY=_require2.CLIPBOARD_BULK_COPY;function linkify(text,click){return linkifyHTML(text,{events:{click:click},defaultProtocol:"https",target:{url:"_blank"}})}/**
 *
 * @param {Object} param0
 * @param {Entry} param0.entry
 * @param {Function} param0.pin
 * @param {Function} param0.copy
 * @param {Function} param0.remove
 * @param {Function} param0.select
 */var ListEntry=function ListEntry(_ref){var entry=_ref.entry,pin=_ref.pin,copy=_ref.copy,remove=_ref.remove,select=_ref.select;return/*#__PURE__*/React.createElement("li",{"data-_id":entry._id,"data-selected":entry.selected,"data-pinned":entry.pinned,style:{position:"relative",listStyle:"none"},title:"Click to copy",onClick:copy,onKeyDown:function onKeyDown(e){return e.code==="Enter"&&copy(e)},tabIndex:0,role:"menuitem"},entry.type==="image"?/*#__PURE__*/React.createElement("img",{src:entry.value,alt:"Copied from clipboard"}):linkify(entry.value,copy),/*#__PURE__*/React.createElement("div",{className:"entry-actions",role:"menubar"},/*#__PURE__*/React.createElement("button",{onClickCapture:remove,"aria-label":"Delete this entry",title:"Delete this entry"},/*#__PURE__*/React.createElement("img",{src:"./trash-outline.svg",alt:"delete icon"})),/*#__PURE__*/React.createElement("button",{onClickCapture:pin,"aria-label":"Pin this entry",title:"Pin this entry","data-active":entry.pinned},/*#__PURE__*/React.createElement("img",{src:"./bookmark-outline.svg",alt:"pin icon"})),/*#__PURE__*/React.createElement("button",{onClickCapture:copy,"aria-label":"Copy this entry",title:"Copy this entry"},/*#__PURE__*/React.createElement("img",{src:"./clipboard-outline.svg",alt:"copy icon"})),/*#__PURE__*/React.createElement("button",{onClickCapture:select,"aria-label":"Select this entry",title:"Select this entry","data-active":entry.selected},/*#__PURE__*/React.createElement("img",{src:"./checkmark-square-outline.svg",alt:"select icon"}))))};var App=/*#__PURE__*/function(_React$Component){(0,_inherits2["default"])(App,_React$Component);var _super=_createSuper(App);function App(props){var _this;(0,_classCallCheck2["default"])(this,App);_this=_super.call(this,props);(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"handleKeyDown",function(_ref2){var code=_ref2.code,ctrlKey=_ref2.ctrlKey,shiftKey=_ref2.shiftKey;if(/Shift/gi.test(code)&&!_this.state.selecting)_this.setState(_objectSpread(_objectSpread({},_this.state),{},{selecting:true}));// Delete pressed
if(code==="Delete")if(ctrlKey){if(shiftKey)// Ctrl pressed
// Combination of CTRL + SHIFT + DELETE
_this.clearHistory();// Combination of CTRL + DELETE
else _this.clearClipboard();// Delete
}else if(_this.isSelecting())_this.deleteSelection();if(code==="KeyC"&&ctrlKey)if(_this.isSelecting())_this.copySelectionButtonRef.current.click()});(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"handleKeyUp",function(_ref3){var code=_ref3.code;if(/Shift/gi.test(code)&&!_this.state.history.some(function(e){return e.selected}))_this.setState(_objectSpread(_objectSpread({},_this.state),{},{selecting:false}))});(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"handleKeyUpClick",function(){if(_this.state.selecting)_this.setState(_objectSpread(_objectSpread({},_this.state),{},{history:_this.state.history.map(function(entry){return new Entry(_objectSpread(_objectSpread({},entry),{},{selected:false}))}),selecting:false}))});(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"handleClipboardEvent",function(ev,entry){// Entry here is gonna be a simple javascript object because electron
// serialises IPC messages, so I convert it back
var history=_this.state.history;// if you really want a performance boost out of this you could
// switch `history` to an object instead, O(1) search by id
if(!history.some(function(e){return e.compareTo(entry)}))_this.setState(_objectSpread(_objectSpread({},_this.state),{},{history:[].concat((0,_toConsumableArray2["default"])(history),[new Entry(entry)])}))});(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"clearHistory",/*#__PURE__*/(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee(){return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!confirm(MESSAGE_CLEAR_BACKEND)){_context.next=3;break}_context.next=3;return _this.clearClipboard();case 3:_this.setState(_objectSpread(_objectSpread({},_this.state),{},{history:_this.state.history.filter(function(e){return e.pinned})}));case 4:case"end":return _context.stop();}}},_callee)})));(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"clearClipboard",function(){return ipcRenderer.invoke(CLIPBOARD_CLEAR).then(function(){alert("Cleared your clipboard!")})});(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"remove",function(ev){var _id=ev.currentTarget.parentNode.parentNode.dataset._id;// The pinging on the backend will always signal to display what's currently stored on the clipboard.
// Leaving the user confused is not part of the deal.
if(confirm(MESSAGE_CONFIRM_REMOVE)){console.log("confirmed");_this.setState(_objectSpread(_objectSpread({},_this.state),{},{history:_this.state.history.filter(function(entry){return entry._id!==_id})}))}});(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"copy",function(ev){var target=ev.target,currentTarget=ev.currentTarget;// Make sure to not copy links and leave their handling to the backend
if(target.tagName.toLowerCase()!=="a"){ev.preventDefault();var _id=_this.getEntryListItem(currentTarget).dataset._id;var index=_this.state.history.findIndex(function(e){return e._id===_id});if(!_this.isSelecting())ipcRenderer.send(CLIPBOARD_EVENT,_this.state.history[index]);else{var history=Array.from(_this.state.history);if(history[index].type!=="text")alert("Fatal: Can only bulk copy text entries");else{history[index].selected=!history[index].selected;_this.setState(_objectSpread(_objectSpread({},_this.state),{},{history:history}))}}ev.stopPropagation()}});(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"getEntryListItem",function(el){var parent=el;while(parent.tagName!=="LI"){parent=parent.parentNode}return parent});(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"pin",function(ev){var _id=_this.getEntryListItem(ev.currentTarget).dataset._id;var indexOfEntry=_this.state.history.findIndex(function(e){return e._id===_id});var history=Array.from(_this.state.history);history[indexOfEntry].pinned=!history[indexOfEntry].pinned;_this.setState(_objectSpread(_objectSpread({},_this.history),{},{history:history}))});(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"copySelection",function(){var merged=_this.state.history.filter(function(e){return e.selected}).join("\r\n");ipcRenderer.send(CLIPBOARD_BULK_COPY,merged)});(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"deleteSelection",function(ev){if(ev)ev.preventDefault();var _this$state$history$f=_this.state.history.filter(function(e){return e.selected}),length=_this$state$history$f.length;_this.setState(_objectSpread(_objectSpread({},_this.state),{},{history:_this.state.history.filter(function(e){return!e.selected})}),function(){alert("Deleted ".concat(length," entries."))})});(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"isSelecting",function(){return _this.isSelectingShift()||_this.isAnyEntrySelected()});(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"isSelectingShift",function(){return _this.state.selecting});(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"isAnyEntrySelected",function(){return _this.state.history.some(function(e){return e.selected})});(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"select",function(ev){var _id=ev.currentTarget.parentNode.parentNode.dataset._id;var index=_this.state.history.findIndex(function(e){return e._id===_id});var history=Array.from(_this.state.history);history[index].selected=!history[index].selected;ev.stopPropagation();_this.setState(_objectSpread(_objectSpread({},_this.state),{},{selecting:true,history:history}),function(){return console.log(_this.state.history[0].selected)})});_this.state={/** @type {import('../types/entry')[]} */history:[],selectingToggle:false,selecting:false};_this.copySelectionButtonRef=React.createRef();return _this}/**
   * @param {KeyboardEvent} param0
   */(0,_createClass2["default"])(App,[{key:"componentDidMount",value:function componentDidMount(){document.addEventListener("click",this.handleKeyUpClick);document.addEventListener("keyup",this.handleKeyUp);document.addEventListener("keydown",this.handleKeyDown);ipcRenderer.on(CLIPBOARD_EVENT,this.handleClipboardEvent)}},{key:"render",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement("div",{style:{display:"flex"}},/*#__PURE__*/React.createElement("button",{onClick:this.clearHistory},"Clear log"),/*#__PURE__*/React.createElement("button",{onClick:this.clearClipboard},"Clear clipboard only"),/*#__PURE__*/React.createElement("button",{onClick:this.copySelection,disabled:!this.isAnyEntrySelected()},"Copy selection"),/*#__PURE__*/React.createElement("button",{onClick:this.deleteSelection,disabled:!this.isAnyEntrySelected()},"Delete selection")),/*#__PURE__*/React.createElement("div",{style:{margin:"8px 0"}},this.state.history.length===0&&"Free as the wind~",this.state.history.length===1&&"There is 1 entry in the clipboard.",this.state.history.length>1&&"There are ".concat(this.state.history.length," entries in the clipboard.")),/*#__PURE__*/React.createElement("ul",{"data-selecting":this.state.selecting,role:"menu"},Array.from(this.state.history).filter(function(e){return e.pinned}).reverse().map(function(entry){return/*#__PURE__*/React.createElement(ListEntry,{key:entry._id,entry:entry,pin:_this2.pin,copy:_this2.copy,remove:_this2.remove,select:_this2.select})}),Array.from(this.state.history).filter(function(e){return!e.pinned}).reverse().map(function(entry){return/*#__PURE__*/React.createElement(ListEntry,{key:entry._id,entry:entry,pin:_this2.pin,copy:_this2.copy,remove:_this2.remove,select:_this2.select})})))}}]);return App}(React.Component);var container=document.querySelector("#container");ReactDOM.render(/*#__PURE__*/React.createElement(App,null),container);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9yZW5kZXIvbWFpbi5qcyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwiaXBjUmVuZGVyZXIiLCJSZWFjdCIsIlJlYWN0RE9NIiwibGlua2lmeUhUTUwiLCJFbnRyeSIsIk1FU1NBR0VfQ0xFQVJfQkFDS0VORCIsIk1FU1NBR0VfQ09ORklSTV9SRU1PVkUiLCJDTElQQk9BUkRfQ0xFQVIiLCJDTElQQk9BUkRfRVZFTlQiLCJDTElQQk9BUkRfQlVMS19DT1BZIiwibGlua2lmeSIsInRleHQiLCJjbGljayIsImV2ZW50cyIsImRlZmF1bHRQcm90b2NvbCIsInRhcmdldCIsInVybCIsIkxpc3RFbnRyeSIsImVudHJ5IiwicGluIiwiY29weSIsInJlbW92ZSIsInNlbGVjdCIsIl9pZCIsInNlbGVjdGVkIiwicGlubmVkIiwicG9zaXRpb24iLCJsaXN0U3R5bGUiLCJlIiwiY29kZSIsInR5cGUiLCJ2YWx1ZSIsIkFwcCIsInByb3BzIiwiY3RybEtleSIsInNoaWZ0S2V5IiwidGVzdCIsInN0YXRlIiwic2VsZWN0aW5nIiwic2V0U3RhdGUiLCJjbGVhckhpc3RvcnkiLCJjbGVhckNsaXBib2FyZCIsImlzU2VsZWN0aW5nIiwiZGVsZXRlU2VsZWN0aW9uIiwiY29weVNlbGVjdGlvbkJ1dHRvblJlZiIsImN1cnJlbnQiLCJoaXN0b3J5Iiwic29tZSIsIm1hcCIsImV2IiwiY29tcGFyZVRvIiwiY29uZmlybSIsImZpbHRlciIsImludm9rZSIsInRoZW4iLCJhbGVydCIsImN1cnJlbnRUYXJnZXQiLCJwYXJlbnROb2RlIiwiZGF0YXNldCIsImNvbnNvbGUiLCJsb2ciLCJ0YWdOYW1lIiwidG9Mb3dlckNhc2UiLCJwcmV2ZW50RGVmYXVsdCIsImdldEVudHJ5TGlzdEl0ZW0iLCJpbmRleCIsImZpbmRJbmRleCIsInNlbmQiLCJBcnJheSIsImZyb20iLCJzdG9wUHJvcGFnYXRpb24iLCJlbCIsInBhcmVudCIsImluZGV4T2ZFbnRyeSIsIm1lcmdlZCIsImpvaW4iLCJsZW5ndGgiLCJpc1NlbGVjdGluZ1NoaWZ0IiwiaXNBbnlFbnRyeVNlbGVjdGVkIiwic2VsZWN0aW5nVG9nZ2xlIiwiY3JlYXRlUmVmIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiaGFuZGxlS2V5VXBDbGljayIsImhhbmRsZUtleVVwIiwiaGFuZGxlS2V5RG93biIsIm9uIiwiaGFuZGxlQ2xpcGJvYXJkRXZlbnQiLCJkaXNwbGF5IiwiY29weVNlbGVjdGlvbiIsIm1hcmdpbiIsInJldmVyc2UiLCJDb21wb25lbnQiLCJjb250YWluZXIiLCJxdWVyeVNlbGVjdG9yIiwicmVuZGVyIl0sIm1hcHBpbmdzIjoiK2hGQUF3QkEsT0FBTyxDQUFDLFVBQUQsQyxDQUF2QkMsVyxVQUFBQSxXLENBQ1IsR0FBTUMsQ0FBQUEsS0FBSyxDQUFHRixPQUFPLENBQUMsT0FBRCxDQUFyQixDQUNBLEdBQU1HLENBQUFBLFFBQVEsQ0FBR0gsT0FBTyxDQUFDLFdBQUQsQ0FBeEIsQ0FDQSxHQUFNSSxDQUFBQSxXQUFXLENBQUdKLE9BQU8sQ0FBQyxnQkFBRCxDQUEzQixDQUVBLEdBQU1LLENBQUFBLEtBQUssQ0FBR0wsT0FBTyxDQUFDLGVBQUQsQ0FBckIsQyxjQVFJQSxPQUFPLENBQUMsYUFBRCxDLENBTFRNLHFCLFdBQUFBLHFCLENBQ0FDLHNCLFdBQUFBLHNCLENBQ0FDLGUsV0FBQUEsZSxDQUNBQyxlLFdBQUFBLGUsQ0FDQUMsbUIsV0FBQUEsbUIsQ0FHRixRQUFTQyxDQUFBQSxPQUFULENBQWlCQyxJQUFqQixDQUF1QkMsS0FBdkIsQ0FBOEIsQ0FDNUIsTUFBT1QsQ0FBQUEsV0FBVyxDQUFDUSxJQUFELENBQU8sQ0FDdkJFLE1BQU0sQ0FBRSxDQUNORCxLQUFLLENBQUxBLEtBRE0sQ0FEZSxDQUl2QkUsZUFBZSxDQUFFLE9BSk0sQ0FLdkJDLE1BQU0sQ0FBRSxDQUNOQyxHQUFHLENBQUUsUUFEQyxDQUxlLENBQVAsQ0FTbkIsQ0FFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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SyxHQURiLENBRUUsS0FBSyxDQUFFTCxLQUZULENBR0UsR0FBRyxDQUFFLE1BQUksQ0FBQ0MsR0FIWixDQUlFLElBQUksQ0FBRSxNQUFJLENBQUNDLElBSmIsQ0FLRSxNQUFNLENBQUUsTUFBSSxDQUFDQyxNQUxmLENBTUUsTUFBTSxDQUFFLE1BQUksQ0FBQ0MsTUFOZixFQURHLENBSE4sQ0FmSCxDQXhCRixDQXVESCxDLGdCQTlTZXJCLEtBQUssQ0FBQzJGLFMsRUFpVHhCLEdBQU1DLENBQUFBLFNBQVMsQ0FBR1osUUFBUSxDQUFDYSxhQUFULENBQXVCLFlBQXZCLENBQWxCLENBQ0E1RixRQUFRLENBQUM2RixNQUFULGNBQWdCLG9CQUFDLEdBQUQsTUFBaEIsQ0FBeUJGLFNBQXpCIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBpcGNSZW5kZXJlciB9ID0gcmVxdWlyZShcImVsZWN0cm9uXCIpO1xuY29uc3QgUmVhY3QgPSByZXF1aXJlKFwicmVhY3RcIik7XG5jb25zdCBSZWFjdERPTSA9IHJlcXVpcmUoXCJyZWFjdC1kb21cIik7XG5jb25zdCBsaW5raWZ5SFRNTCA9IHJlcXVpcmUoXCJsaW5raWZ5anMvaHRtbFwiKTtcblxuY29uc3QgRW50cnkgPSByZXF1aXJlKFwiLi90eXBlcy9lbnRyeVwiKTtcblxuY29uc3Qge1xuICBNRVNTQUdFX0NMRUFSX0JBQ0tFTkQsXG4gIE1FU1NBR0VfQ09ORklSTV9SRU1PVkUsXG4gIENMSVBCT0FSRF9DTEVBUixcbiAgQ0xJUEJPQVJEX0VWRU5ULFxuICBDTElQQk9BUkRfQlVMS19DT1BZLFxufSA9IHJlcXVpcmUoXCIuL2NvbnN0YW50c1wiKTtcblxuZnVuY3Rpb24gbGlua2lmeSh0ZXh0LCBjbGljaykge1xuICByZXR1cm4gbGlua2lmeUhUTUwodGV4dCwge1xuICAgIGV2ZW50czoge1xuICAgICAgY2xpY2ssXG4gICAgfSxcbiAgICBkZWZhdWx0UHJvdG9jb2w6IFwiaHR0cHNcIixcbiAgICB0YXJnZXQ6IHtcbiAgICAgIHVybDogXCJfYmxhbmtcIixcbiAgICB9LFxuICB9KTtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhcmFtMFxuICogQHBhcmFtIHtFbnRyeX0gcGFyYW0wLmVudHJ5XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwYXJhbTAucGluXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwYXJhbTAuY29weVxuICogQHBhcmFtIHtGdW5jdGlvbn0gcGFyYW0wLnJlbW92ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gcGFyYW0wLnNlbGVjdFxuICovXG5jb25zdCBMaXN0RW50cnkgPSAoeyBlbnRyeSwgcGluLCBjb3B5LCByZW1vdmUsIHNlbGVjdCB9KSA9PiB7XG4gIHJldHVybiAoXG4gICAgPGxpXG4gICAgICBkYXRhLV9pZD17ZW50cnkuX2lkfVxuICAgICAgZGF0YS1zZWxlY3RlZD17ZW50cnkuc2VsZWN0ZWR9XG4gICAgICBkYXRhLXBpbm5lZD17ZW50cnkucGlubmVkfVxuICAgICAgc3R5bGU9e3sgcG9zaXRpb246IFwicmVsYXRpdmVcIiwgbGlzdFN0eWxlOiBcIm5vbmVcIiB9fVxuICAgICAgdGl0bGU9XCJDbGljayB0byBjb3B5XCJcbiAgICAgIG9uQ2xpY2s9e2NvcHl9XG4gICAgICBvbktleURvd249eyhlKSA9PiBlLmNvZGUgPT09IFwiRW50ZXJcIiAmJiBjb3B5KGUpfVxuICAgICAgdGFiSW5kZXg9ezB9XG4gICAgICByb2xlPVwibWVudWl0ZW1cIlxuICAgID5cbiAgICAgIHtlbnRyeS50eXBlID09PSBcImltYWdlXCIgPyAoXG4gICAgICAgIDxpbWcgc3JjPXtlbnRyeS52YWx1ZX0gYWx0PVwiQ29waWVkIGZyb20gY2xpcGJvYXJkXCIgLz5cbiAgICAgICkgOiAoXG4gICAgICAgIGxpbmtpZnkoZW50cnkudmFsdWUsIGNvcHkpXG4gICAgICApfVxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImVudHJ5LWFjdGlvbnNcIiByb2xlPVwibWVudWJhclwiPlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgb25DbGlja0NhcHR1cmU9e3JlbW92ZX1cbiAgICAgICAgICBhcmlhLWxhYmVsPVwiRGVsZXRlIHRoaXMgZW50cnlcIlxuICAgICAgICAgIHRpdGxlPVwiRGVsZXRlIHRoaXMgZW50cnlcIlxuICAgICAgICA+XG4gICAgICAgICAgPGltZyBzcmM9XCIuL3RyYXNoLW91dGxpbmUuc3ZnXCIgYWx0PVwiZGVsZXRlIGljb25cIiAvPlxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIG9uQ2xpY2tDYXB0dXJlPXtwaW59XG4gICAgICAgICAgYXJpYS1sYWJlbD1cIlBpbiB0aGlzIGVudHJ5XCJcbiAgICAgICAgICB0aXRsZT1cIlBpbiB0aGlzIGVudHJ5XCJcbiAgICAgICAgICBkYXRhLWFjdGl2ZT17ZW50cnkucGlubmVkfVxuICAgICAgICA+XG4gICAgICAgICAgPGltZyBzcmM9XCIuL2Jvb2ttYXJrLW91dGxpbmUuc3ZnXCIgYWx0PVwicGluIGljb25cIiAvPlxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIG9uQ2xpY2tDYXB0dXJlPXtjb3B5fVxuICAgICAgICAgIGFyaWEtbGFiZWw9XCJDb3B5IHRoaXMgZW50cnlcIlxuICAgICAgICAgIHRpdGxlPVwiQ29weSB0aGlzIGVudHJ5XCJcbiAgICAgICAgPlxuICAgICAgICAgIDxpbWcgc3JjPVwiLi9jbGlwYm9hcmQtb3V0bGluZS5zdmdcIiBhbHQ9XCJjb3B5IGljb25cIiAvPlxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIG9uQ2xpY2tDYXB0dXJlPXtzZWxlY3R9XG4gICAgICAgICAgYXJpYS1sYWJlbD1cIlNlbGVjdCB0aGlzIGVudHJ5XCJcbiAgICAgICAgICB0aXRsZT1cIlNlbGVjdCB0aGlzIGVudHJ5XCJcbiAgICAgICAgICBkYXRhLWFjdGl2ZT17ZW50cnkuc2VsZWN0ZWR9XG4gICAgICAgID5cbiAgICAgICAgICA8aW1nIHNyYz1cIi4vY2hlY2ttYXJrLXNxdWFyZS1vdXRsaW5lLnN2Z1wiIGFsdD1cInNlbGVjdCBpY29uXCIgLz5cbiAgICAgICAgPC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICA8L2xpPlxuICApO1xufTtcblxuY2xhc3MgQXBwIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KCcuLi90eXBlcy9lbnRyeScpW119ICovXG4gICAgICBoaXN0b3J5OiBbXSxcbiAgICAgIHNlbGVjdGluZ1RvZ2dsZTogZmFsc2UsXG4gICAgICBzZWxlY3Rpbmc6IGZhbHNlLFxuICAgIH07XG5cbiAgICB0aGlzLmNvcHlTZWxlY3Rpb25CdXR0b25SZWYgPSBSZWFjdC5jcmVhdGVSZWYoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0tleWJvYXJkRXZlbnR9IHBhcmFtMFxuICAgKi9cbiAgaGFuZGxlS2V5RG93biA9ICh7IGNvZGUsIGN0cmxLZXksIHNoaWZ0S2V5IH0pID0+IHtcbiAgICBpZiAoL1NoaWZ0L2dpLnRlc3QoY29kZSkgJiYgIXRoaXMuc3RhdGUuc2VsZWN0aW5nKVxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIC4uLnRoaXMuc3RhdGUsXG4gICAgICAgIHNlbGVjdGluZzogdHJ1ZSxcbiAgICAgIH0pO1xuXG4gICAgLy8gRGVsZXRlIHByZXNzZWRcbiAgICBpZiAoY29kZSA9PT0gXCJEZWxldGVcIilcbiAgICAgIGlmIChjdHJsS2V5KVxuICAgICAgICBpZiAoc2hpZnRLZXkpXG4gICAgICAgICAgLy8gQ3RybCBwcmVzc2VkXG4gICAgICAgICAgLy8gQ29tYmluYXRpb24gb2YgQ1RSTCArIFNISUZUICsgREVMRVRFXG4gICAgICAgICAgdGhpcy5jbGVhckhpc3RvcnkoKTtcbiAgICAgICAgLy8gQ29tYmluYXRpb24gb2YgQ1RSTCArIERFTEVURVxuICAgICAgICBlbHNlIHRoaXMuY2xlYXJDbGlwYm9hcmQoKTtcbiAgICAgIC8vIERlbGV0ZVxuICAgICAgZWxzZSBpZiAodGhpcy5pc1NlbGVjdGluZygpKSB0aGlzLmRlbGV0ZVNlbGVjdGlvbigpO1xuXG4gICAgaWYgKGNvZGUgPT09IFwiS2V5Q1wiICYmIGN0cmxLZXkpXG4gICAgICBpZiAodGhpcy5pc1NlbGVjdGluZygpKSB0aGlzLmNvcHlTZWxlY3Rpb25CdXR0b25SZWYuY3VycmVudC5jbGljaygpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0tleWJvYXJkRXZlbnR9IHBhcmFtMFxuICAgKi9cbiAgaGFuZGxlS2V5VXAgPSAoeyBjb2RlIH0pID0+IHtcbiAgICBpZiAoL1NoaWZ0L2dpLnRlc3QoY29kZSkgJiYgIXRoaXMuc3RhdGUuaGlzdG9yeS5zb21lKChlKSA9PiBlLnNlbGVjdGVkKSlcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAuLi50aGlzLnN0YXRlLFxuICAgICAgICBzZWxlY3Rpbmc6IGZhbHNlLFxuICAgICAgfSk7XG4gIH07XG5cbiAgaGFuZGxlS2V5VXBDbGljayA9ICgpID0+IHtcbiAgICBpZiAodGhpcy5zdGF0ZS5zZWxlY3RpbmcpXG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgLi4udGhpcy5zdGF0ZSxcbiAgICAgICAgaGlzdG9yeTogdGhpcy5zdGF0ZS5oaXN0b3J5Lm1hcChcbiAgICAgICAgICAoZW50cnkpID0+XG4gICAgICAgICAgICBuZXcgRW50cnkoe1xuICAgICAgICAgICAgICAuLi5lbnRyeSxcbiAgICAgICAgICAgICAgc2VsZWN0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICksXG4gICAgICAgIHNlbGVjdGluZzogZmFsc2UsXG4gICAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogSGFuZGxlcyBrZXlib2FyZCBwb2xsaW5nXG4gICAqIEBwYXJhbSB7RWxlY3Ryb24uSXBjTWVzc2FnZUV2ZW50fSBldlxuICAgKiBAcGFyYW0ge09iamVjdH0gZW50cnlcbiAgICovXG4gIGhhbmRsZUNsaXBib2FyZEV2ZW50ID0gKGV2LCBlbnRyeSkgPT4ge1xuICAgIC8vIEVudHJ5IGhlcmUgaXMgZ29ubmEgYmUgYSBzaW1wbGUgamF2YXNjcmlwdCBvYmplY3QgYmVjYXVzZSBlbGVjdHJvblxuICAgIC8vIHNlcmlhbGlzZXMgSVBDIG1lc3NhZ2VzLCBzbyBJIGNvbnZlcnQgaXQgYmFja1xuICAgIGNvbnN0IHsgaGlzdG9yeSB9ID0gdGhpcy5zdGF0ZTtcblxuICAgIC8vIGlmIHlvdSByZWFsbHkgd2FudCBhIHBlcmZvcm1hbmNlIGJvb3N0IG91dCBvZiB0aGlzIHlvdSBjb3VsZFxuICAgIC8vIHN3aXRjaCBgaGlzdG9yeWAgdG8gYW4gb2JqZWN0IGluc3RlYWQsIE8oMSkgc2VhcmNoIGJ5IGlkXG4gICAgaWYgKCFoaXN0b3J5LnNvbWUoKGUpID0+IGUuY29tcGFyZVRvKGVudHJ5KSkpXG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgLi4udGhpcy5zdGF0ZSxcbiAgICAgICAgaGlzdG9yeTogWy4uLmhpc3RvcnksIG5ldyBFbnRyeShlbnRyeSldLFxuICAgICAgfSk7XG4gIH07XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuaGFuZGxlS2V5VXBDbGljayk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuaGFuZGxlS2V5VXApO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuaGFuZGxlS2V5RG93bik7XG5cbiAgICBpcGNSZW5kZXJlci5vbihDTElQQk9BUkRfRVZFTlQsIHRoaXMuaGFuZGxlQ2xpcGJvYXJkRXZlbnQpO1xuICB9XG5cbiAgY2xlYXJIaXN0b3J5ID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmIChjb25maXJtKE1FU1NBR0VfQ0xFQVJfQkFDS0VORCkpIGF3YWl0IHRoaXMuY2xlYXJDbGlwYm9hcmQoKTtcblxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgLi4udGhpcy5zdGF0ZSxcbiAgICAgIGhpc3Rvcnk6IHRoaXMuc3RhdGUuaGlzdG9yeS5maWx0ZXIoKGUpID0+IGUucGlubmVkKSxcbiAgICB9KTtcbiAgfTtcblxuICBjbGVhckNsaXBib2FyZCA9ICgpID0+IHtcbiAgICByZXR1cm4gaXBjUmVuZGVyZXIuaW52b2tlKENMSVBCT0FSRF9DTEVBUikudGhlbigoKSA9PiB7XG4gICAgICBhbGVydChcIkNsZWFyZWQgeW91ciBjbGlwYm9hcmQhXCIpO1xuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1VJRXZlbnR9IGV2XG4gICAqL1xuICByZW1vdmUgPSAoZXYpID0+IHtcbiAgICBjb25zdCB7IF9pZCB9ID0gZXYuY3VycmVudFRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuZGF0YXNldDtcblxuICAgIC8vIFRoZSBwaW5naW5nIG9uIHRoZSBiYWNrZW5kIHdpbGwgYWx3YXlzIHNpZ25hbCB0byBkaXNwbGF5IHdoYXQncyBjdXJyZW50bHkgc3RvcmVkIG9uIHRoZSBjbGlwYm9hcmQuXG4gICAgLy8gTGVhdmluZyB0aGUgdXNlciBjb25mdXNlZCBpcyBub3QgcGFydCBvZiB0aGUgZGVhbC5cbiAgICBpZiAoY29uZmlybShNRVNTQUdFX0NPTkZJUk1fUkVNT1ZFKSkge1xuICAgICAgY29uc29sZS5sb2coXCJjb25maXJtZWRcIik7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgLi4udGhpcy5zdGF0ZSxcbiAgICAgICAgaGlzdG9yeTogdGhpcy5zdGF0ZS5oaXN0b3J5LmZpbHRlcigoZW50cnkpID0+IGVudHJ5Ll9pZCAhPT0gX2lkKSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtVSUV2ZW50fSBldlxuICAgKi9cbiAgY29weSA9IChldikgPT4ge1xuICAgIGNvbnN0IHsgdGFyZ2V0LCBjdXJyZW50VGFyZ2V0IH0gPSBldjtcblxuICAgIC8vIE1ha2Ugc3VyZSB0byBub3QgY29weSBsaW5rcyBhbmQgbGVhdmUgdGhlaXIgaGFuZGxpbmcgdG8gdGhlIGJhY2tlbmRcbiAgICBpZiAodGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSAhPT0gXCJhXCIpIHtcbiAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBjb25zdCB7IF9pZCB9ID0gdGhpcy5nZXRFbnRyeUxpc3RJdGVtKGN1cnJlbnRUYXJnZXQpLmRhdGFzZXQ7XG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMuc3RhdGUuaGlzdG9yeS5maW5kSW5kZXgoKGUpID0+IGUuX2lkID09PSBfaWQpO1xuXG4gICAgICBpZiAoIXRoaXMuaXNTZWxlY3RpbmcoKSlcbiAgICAgICAgaXBjUmVuZGVyZXIuc2VuZChDTElQQk9BUkRfRVZFTlQsIHRoaXMuc3RhdGUuaGlzdG9yeVtpbmRleF0pO1xuICAgICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IGhpc3RvcnkgPSBBcnJheS5mcm9tKHRoaXMuc3RhdGUuaGlzdG9yeSk7XG5cbiAgICAgICAgaWYgKGhpc3RvcnlbaW5kZXhdLnR5cGUgIT09IFwidGV4dFwiKVxuICAgICAgICAgIGFsZXJ0KFwiRmF0YWw6IENhbiBvbmx5IGJ1bGsgY29weSB0ZXh0IGVudHJpZXNcIik7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGhpc3RvcnlbaW5kZXhdLnNlbGVjdGVkID0gIWhpc3RvcnlbaW5kZXhdLnNlbGVjdGVkO1xuXG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAuLi50aGlzLnN0YXRlLFxuICAgICAgICAgICAgaGlzdG9yeSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICovXG4gIGdldEVudHJ5TGlzdEl0ZW0gPSAoZWwpID0+IHtcbiAgICBsZXQgcGFyZW50ID0gZWw7XG5cbiAgICB3aGlsZSAocGFyZW50LnRhZ05hbWUgIT09IFwiTElcIikgcGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGU7XG5cbiAgICByZXR1cm4gcGFyZW50O1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1VJRXZlbnR9IGV2XG4gICAqL1xuICBwaW4gPSAoZXYpID0+IHtcbiAgICBjb25zdCB7IF9pZCB9ID0gdGhpcy5nZXRFbnRyeUxpc3RJdGVtKGV2LmN1cnJlbnRUYXJnZXQpLmRhdGFzZXQ7XG4gICAgY29uc3QgaW5kZXhPZkVudHJ5ID0gdGhpcy5zdGF0ZS5oaXN0b3J5LmZpbmRJbmRleCgoZSkgPT4gZS5faWQgPT09IF9pZCk7XG5cbiAgICBjb25zdCBoaXN0b3J5ID0gQXJyYXkuZnJvbSh0aGlzLnN0YXRlLmhpc3RvcnkpO1xuICAgIGhpc3RvcnlbaW5kZXhPZkVudHJ5XS5waW5uZWQgPSAhaGlzdG9yeVtpbmRleE9mRW50cnldLnBpbm5lZDtcblxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgLi4udGhpcy5oaXN0b3J5LFxuICAgICAgaGlzdG9yeSxcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtVSUV2ZW50fSBldlxuICAgKi9cbiAgY29weVNlbGVjdGlvbiA9ICgpID0+IHtcbiAgICBjb25zdCBtZXJnZWQgPSB0aGlzLnN0YXRlLmhpc3RvcnkuZmlsdGVyKChlKSA9PiBlLnNlbGVjdGVkKS5qb2luKFwiXFxyXFxuXCIpO1xuXG4gICAgaXBjUmVuZGVyZXIuc2VuZChDTElQQk9BUkRfQlVMS19DT1BZLCBtZXJnZWQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1VJRXZlbnR9IGV2XG4gICAqL1xuICBkZWxldGVTZWxlY3Rpb24gPSAoZXYpID0+IHtcbiAgICBpZiAoZXYpIGV2LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBjb25zdCB7IGxlbmd0aCB9ID0gdGhpcy5zdGF0ZS5oaXN0b3J5LmZpbHRlcigoZSkgPT4gZS5zZWxlY3RlZCk7XG4gICAgdGhpcy5zZXRTdGF0ZShcbiAgICAgIHtcbiAgICAgICAgLi4udGhpcy5zdGF0ZSxcbiAgICAgICAgaGlzdG9yeTogdGhpcy5zdGF0ZS5oaXN0b3J5LmZpbHRlcigoZSkgPT4gIWUuc2VsZWN0ZWQpLFxuICAgICAgfSxcbiAgICAgICgpID0+IHtcbiAgICAgICAgYWxlcnQoYERlbGV0ZWQgJHtsZW5ndGh9IGVudHJpZXMuYCk7XG4gICAgICB9LFxuICAgICk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgaXNTZWxlY3RpbmcgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuaXNTZWxlY3RpbmdTaGlmdCgpIHx8IHRoaXMuaXNBbnlFbnRyeVNlbGVjdGVkKCk7XG4gIH07XG5cbiAgaXNTZWxlY3RpbmdTaGlmdCA9ICgpID0+IHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5zZWxlY3Rpbmc7XG4gIH07XG5cbiAgaXNBbnlFbnRyeVNlbGVjdGVkID0gKCkgPT4ge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLmhpc3Rvcnkuc29tZSgoZSkgPT4gZS5zZWxlY3RlZCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7VUlFdmVudH0gZXZcbiAgICovXG4gIHNlbGVjdCA9IChldikgPT4ge1xuICAgIGNvbnN0IHsgX2lkIH0gPSBldi5jdXJyZW50VGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5kYXRhc2V0O1xuXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLnN0YXRlLmhpc3RvcnkuZmluZEluZGV4KChlKSA9PiBlLl9pZCA9PT0gX2lkKTtcblxuICAgIGNvbnN0IGhpc3RvcnkgPSBBcnJheS5mcm9tKHRoaXMuc3RhdGUuaGlzdG9yeSk7XG4gICAgaGlzdG9yeVtpbmRleF0uc2VsZWN0ZWQgPSAhaGlzdG9yeVtpbmRleF0uc2VsZWN0ZWQ7XG5cbiAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgIHRoaXMuc2V0U3RhdGUoeyAuLi50aGlzLnN0YXRlLCBzZWxlY3Rpbmc6IHRydWUsIGhpc3RvcnkgfSwgKCkgPT5cbiAgICAgIGNvbnNvbGUubG9nKHRoaXMuc3RhdGUuaGlzdG9yeVswXS5zZWxlY3RlZCksXG4gICAgKTtcbiAgfTtcblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDw+XG4gICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogXCJmbGV4XCIgfX0+XG4gICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXt0aGlzLmNsZWFySGlzdG9yeX0+Q2xlYXIgbG9nPC9idXR0b24+XG4gICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXt0aGlzLmNsZWFyQ2xpcGJvYXJkfT5DbGVhciBjbGlwYm9hcmQgb25seTwvYnV0dG9uPlxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuY29weVNlbGVjdGlvbn1cbiAgICAgICAgICAgIGRpc2FibGVkPXshdGhpcy5pc0FueUVudHJ5U2VsZWN0ZWQoKX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICBDb3B5IHNlbGVjdGlvblxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuZGVsZXRlU2VsZWN0aW9ufVxuICAgICAgICAgICAgZGlzYWJsZWQ9eyF0aGlzLmlzQW55RW50cnlTZWxlY3RlZCgpfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIERlbGV0ZSBzZWxlY3Rpb25cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luOiBcIjhweCAwXCIgfX0+XG4gICAgICAgICAge3RoaXMuc3RhdGUuaGlzdG9yeS5sZW5ndGggPT09IDAgJiYgXCJGcmVlIGFzIHRoZSB3aW5kflwifVxuICAgICAgICAgIHt0aGlzLnN0YXRlLmhpc3RvcnkubGVuZ3RoID09PSAxICYmXG4gICAgICAgICAgICBcIlRoZXJlIGlzIDEgZW50cnkgaW4gdGhlIGNsaXBib2FyZC5cIn1cbiAgICAgICAgICB7dGhpcy5zdGF0ZS5oaXN0b3J5Lmxlbmd0aCA+IDEgJiZcbiAgICAgICAgICAgIGBUaGVyZSBhcmUgJHt0aGlzLnN0YXRlLmhpc3RvcnkubGVuZ3RofSBlbnRyaWVzIGluIHRoZSBjbGlwYm9hcmQuYH1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDx1bCBkYXRhLXNlbGVjdGluZz17dGhpcy5zdGF0ZS5zZWxlY3Rpbmd9IHJvbGU9XCJtZW51XCI+XG4gICAgICAgICAge0FycmF5LmZyb20odGhpcy5zdGF0ZS5oaXN0b3J5KVxuICAgICAgICAgICAgLmZpbHRlcigoZSkgPT4gZS5waW5uZWQpXG4gICAgICAgICAgICAucmV2ZXJzZSgpXG4gICAgICAgICAgICAubWFwKChlbnRyeSkgPT4gKFxuICAgICAgICAgICAgICA8TGlzdEVudHJ5XG4gICAgICAgICAgICAgICAga2V5PXtlbnRyeS5faWR9XG4gICAgICAgICAgICAgICAgZW50cnk9e2VudHJ5fVxuICAgICAgICAgICAgICAgIHBpbj17dGhpcy5waW59XG4gICAgICAgICAgICAgICAgY29weT17dGhpcy5jb3B5fVxuICAgICAgICAgICAgICAgIHJlbW92ZT17dGhpcy5yZW1vdmV9XG4gICAgICAgICAgICAgICAgc2VsZWN0PXt0aGlzLnNlbGVjdH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICkpfVxuXG4gICAgICAgICAge0FycmF5LmZyb20odGhpcy5zdGF0ZS5oaXN0b3J5KVxuICAgICAgICAgICAgLmZpbHRlcigoZSkgPT4gIWUucGlubmVkKVxuICAgICAgICAgICAgLnJldmVyc2UoKVxuICAgICAgICAgICAgLm1hcCgoZW50cnkpID0+IChcbiAgICAgICAgICAgICAgPExpc3RFbnRyeVxuICAgICAgICAgICAgICAgIGtleT17ZW50cnkuX2lkfVxuICAgICAgICAgICAgICAgIGVudHJ5PXtlbnRyeX1cbiAgICAgICAgICAgICAgICBwaW49e3RoaXMucGlufVxuICAgICAgICAgICAgICAgIGNvcHk9e3RoaXMuY29weX1cbiAgICAgICAgICAgICAgICByZW1vdmU9e3RoaXMucmVtb3ZlfVxuICAgICAgICAgICAgICAgIHNlbGVjdD17dGhpcy5zZWxlY3R9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgPC91bD5cbiAgICAgIDwvPlxuICAgICk7XG4gIH1cbn1cblxuY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb250YWluZXJcIik7XG5SZWFjdERPTS5yZW5kZXIoPEFwcCAvPiwgY29udGFpbmVyKTtcbiJdfQ==